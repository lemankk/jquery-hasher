/* jQuery - hasher; license: https://github.com/lemankk/jquery-hasher/ */
(function(h,e,o){var l=function(){this.parameters={};this.nodes=[];this.search=this.path=this.requested=this.hash=""};l.prototype={hash:"",requested:"",path:"",parameters:null,nodes:null};var m=function(a){if("object"==typeof a)return a;var c=1<arguments.length?arguments[1]:null;c||(c={});a=""+a;"?"==a.substr(0,1)&&(a=a.substr(1));if(a&&0<a.length){var d=a.split("&");h(d).each(function(a,d){var b=d.indexOf("=");0<b?(key=d.substr(0,b),val=d.substr(b+1)):(key=d,val="");c[key]=val})}return c},k=function(a){var b=
1<arguments.length?arguments[1]:null,d=new l;0==a.indexOf(c.basePath)&&(a=a.substr(c.basePath.length));var g="",e=a.indexOf("#");0<=e&&(a=a.substr(e+1));"/"==a[0]&&(a=a.substr(1));e=a.indexOf("?");0<=e&&(g=a.substr(e+1),a=a.substr(0,e));var e=""==a?[]:a.split("/"),f;if(b&&"object"==typeof b)for(f in b)d.parameters[f]=b[f];g&&0<g.length&&m(g,d.parameters);b="";for(f in d.parameters)b+=0<b.length?"&":"?",b+=f+"="+escape(d.parameters[f]);d.search=b;d.hash=c.support?"":a+b;d.path=c.support&&0==("/"+a).indexOf(c.basePath)?
("/"+a).substr(c.basePath.length):a;d.nodes=e;d.requested=c.basePath+d.path+b;return d},c={enabled:!0};c.support=e.history&&e.history.pushState&&e.history.replaceState?!0:!1;c.basePath="";c.baseQuery={};var b={events:{}};b.events.change="hasher_change";b.history=c;b.setBasePath=function(a){c.basePath=a;i(!0)};var f,g,j;f=g=new l;var p=function(){i()},q=function(){i()},n=function(){h(e).trigger(b.events.change)},i=function(a){f=g;c.support&&c.enabled&&(j=location.href,g=k(j),f&&(f.path!=g.path&&!a)&&
n());0<location.hash.length&&(j=location.hash,g=k(j),f&&(f.path!=g.path&&!a)&&n())};b.enable=function(a){h(e).bind("hashchange",p);h(e).bind("popstate",q);a||i(a)};b.disable=function(){h(e).unbind("hashchange",p);h(e).unbind("popstate",q)};b.check=i;b.change=function(a,b,d){f=g;j=a;g=k(a,c.baseQuery);d||(d=o.title?o.title:"");c.support&&c.enabled?e.history.pushState(null,d,g.requested):location.hash=a;f&&(f.path!=g.path&&!b)&&n()};b.current=function(){return g};b.last=function(){return f};b.utils=
{};b.utils.urlQueryToObject=m;b.utils.parsePath=k;h.hasher=b;e.Hasher=b;null==c.basePath&&(c.basePath=location.pathname);null==c.baseQuery&&(c.baseQuery=m(location.search))})(jQuery,window,document);