/* jQuery - hasher; license: https://github.com/lemankk/jquery-hasher/ */
var Hasher={};Hasher.current=null;Hasher.last=null;Hasher.change=function(a,b){};Hasher.events={};Hasher.events.change="hasher_change";Hasner.history={};Hasher.history.support=window.history&&window.history.pushState&&window.history.replaceState;Hasher.history.basePath="";Hasher.history.baseQuery={};(function(a){var b=function(){this.parameters={};this.nodes=[];this.hash="";this.requested="";this.path="";this.search=""};b.prototype={hash:"",requested:"",path:"",parameters:null,nodes:null};var c,d,e;c=d=new b;var f=function(a){n()};var g=function(a){n()};var h=function(b){a(window).bind("hashchange",f);a(window).bind("popstate",g);if(!b)n()};var i=function(){a(window).unbind("hashchange",f);a(window).unbind("popstate",g)};var j=function(){a(window).trigger(Hasher.events.change)};var k=function(a,b,e){c=d;nextAddr=a;d=m(nextAddr,Hasher.history.baseQuery);if(!e)e=document.title?document.title:"";if(Hasher.historyPushSupport){window.history.pushState(null,e,d.requested)}else{location.hash=a}Hasher.last=c;Hasher.current=d;if(c&&c.path!=d.path&&!b){j()}};var l=function(b,c){if(typeof b=="object")return b;if(!c)c={};b=""+b;if(b.substr(0,1)=="?")b=b.substr(1);if(b&&b.length>0){var d=b.split("&");a(d).each(function(a,b){var d=b.indexOf("=");if(d>0){key=b.substr(0,d);val=b.substr(d+1)}else{key=b;val=""}c[key]=val})}return c};var m=function(a,c){var d=new b;d.requested=a;var e="";var f=a.indexOf("#");if(f>=0){a=a.substr(f+1)}if(a[0]=="/"){a=a.substr(1)}f=a.indexOf("?");if(f>=0){e=a.substr(f+1);a=a.substr(0,f)}var g=a.split("/");var h,i;if(c&&typeof c=="object"){for(h in c){d.parameters[h]=c[h]}}if(e&&e.length>0){l(e,d.parameters)}var j="";for(h in d.parameters){j+=j.length>0?"&":"?";j+=h+"="+escape(d.parameters[h])}d.search=j;d.hash=Hasher.history.support?"":a+j;d.path=Hasher.history.support?("/"+a).substr(Hasher.history.basePath.length):a;d.nodes=g;d.requested=Hasher.history.basePath+d.path+j;return d};var n=function(a){c=d;if(Hasher.history.support){nextAddr=location.pathname+location.search;d=m(nextAddr);Hasher.current=d;Hasher.last=c;if(c&&c.path!=d.path&&!a)j()}if(location.hash.length>0){nextAddr=location.hash;d=m(nextAddr);Hasher.current=d;Hasher.last=c;if(c&&c.path!=d.path&&!a)j()}};Hasher.enable=h;Hasher.disable=i;Hasher.check=n;Hasher.change=k;Hasher.current=d;Hasher.last=c;a(document).ready(function(){if(Hasher.history.basePath==null)Hasher.history.basePath=location.pathname;if(Hasher.history.baseQuery==null)Hasher.history.baseQuery=l(location.search);h(true);n(true)});a.hasher=Hasher})(jQuery)