/* jQuery - hasher; license: https://github.com/lemankk/jquery-hasher/ */
(function(h,g,n){var k=function(){this.parameters={};this.nodes=[];this.search=this.path=this.requested=this.hash=""};k.prototype={hash:"",requested:"",path:"",parameters:null,nodes:null};var l=function(b){if("object"==typeof b)return b;var a=1<arguments.length?arguments[1]:null;a||(a={});b=""+b;"?"==b.substr(0,1)&&(b=b.substr(1));if(b&&0<b.length){var c=b.split("&");h(c).each(function(b,c){var d=c.indexOf("=");0<d?(key=c.substr(0,d),val=c.substr(d+1)):(key=c,val="");a[key]=val})}return a},j=function(b){var a=
1<arguments.length?arguments[1]:null,c=new k;c.requested=b;var f="",e=b.indexOf("#");0<=e&&(b=b.substr(e+1));"/"==b[0]&&(b=b.substr(1));e=b.indexOf("?");0<=e&&(f=b.substr(e+1),b=b.substr(0,e));var e=b.split("/"),g;if(a&&"object"==typeof a)for(g in a)c.parameters[g]=a[g];f&&0<f.length&&l(f,c.parameters);a="";for(g in c.parameters)a+=0<a.length?"&":"?",a+=g+"="+escape(c.parameters[g]);c.search=a;c.hash=d.support?"":b+a;c.path=d.support?("/"+b).substr(d.basePath.length):b;c.nodes=e;c.requested=d.basePath+
c.path+a;return c},d={enabled:!0};d.support=g.history&&g.history.pushState&&g.history.replaceState?!0:!1;d.basePath="";d.baseQuery={};var a={events:{}};a.events.change="hasher_change";a.history=d;a.current=null;a.last=null;var e,f;e=f=new k;var o=function(){i()},p=function(){i()},q=function(a){h(g).bind("hashchange",o);h(g).bind("popstate",p);a||i()},m=function(){h(g).trigger(a.events.change)},i=function(b){e=f;d.supported&&d.supported&&(nextAddr=location.pathname+location.search,f=j(nextAddr),a.current=
f,(a.last=e)&&(e.path!=f.path&&!b)&&m());0<location.hash.length&&(nextAddr=location.hash,f=j(nextAddr),a.current=f,(a.last=e)&&(e.path!=f.path&&!b)&&m())};a.enable=q;a.disable=function(){h(g).unbind("hashchange",o);h(g).unbind("popstate",p)};a.check=i;a.change=function(b,h,c){e=f;nextAddr=b;f=j(nextAddr,d.baseQuery);c||(c=n.title?n.title:"");d.supported&&d.supported?g.history.pushState(null,c,f.requested):location.hash=b;a.last=e;a.current=f;e&&(e.path!=f.path&&!h)&&m()};a.current=f;a.last=e;a.utils=
{};a.utils.urlQueryToObject=l;a.utils.parsePath=j;h.hasher=a;g.Hasher=a;null==d.basePath&&(d.basePath=location.pathname);null==d.baseQuery&&(d.baseQuery=l(location.search));q(!0);i(!0)})(jQuery,window,document);