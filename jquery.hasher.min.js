/* jQuery - hasher; license: https://github.com/lemankk/jquery-hasher/ */
(function(h,f,u){var q=function(){this.parameters={};this.nodes=[]};q.prototype={hash:"",requested:"",path:"",search:"",parameters:null,nodes:null,node:function(a){a||(a=0);0>a&&(a=this.nodes.length+a);return this.nodes.length>a&&0<=a?this.nodes[a]:null},parameter:function(a){return!a?null:this.parameters&&"undefined"!=typeof this.parameters[a]?this.parameters[a]:null}};var p=function(a){if("object"==typeof a)return a;var e=1<arguments.length?arguments[1]:null;e||(e={});a=""+a;"?"==a.substr(0,1)&&
(a=a.substr(1));if(a&&0<a.length){var b=a.split("&");h(b).each(function(a,b){var d=b.indexOf("=");0<d?(key=b.substr(0,d),val=b.substr(d+1)):(key=b,val="");e[key]=val})}return e},n=function(a,d){a||(a="");var b=String(a),c=new q;if("object"==typeof d)for(h in d)c.parameters[h]=d[h];var f=null,j=null,g=b.indexOf("#");0<=g&&(f=b.substr(g+1),b=b.substr(0,g),g=f.indexOf("?"),0<=g&&(j=f.substr(g+1),f=f.substr(0,g)));var k="",g=b.indexOf("?");0<=g&&(k=b.substr(g+1),b=b.substr(0,g));"/"==b.substr(0,1)&&(b=
b.substr(1));e.support&&e.enabled?(g=String(e.basePath),"/"==g.substr(-1,1)&&g.substr(0,g.length-1)==b?b="":0==b.indexOf(g)&&(b=b.substr(g.length)),"/"==b.substr(0,1)&&(b=b.substr(1))):null==f?f=b:b=f;var g=""==b?[]:b.split("/"),h;k&&0<k.length&&p(k,c.parameters);j&&0<j.length&&p(j,c.parameters);k="";for(h in c.parameters)k+=0<k.length?"&":"",k+=h+"="+escape(c.parameters[h]);c.search=k;c.hash=f;c.hashParameter=j;c.path=b;c.nodes=g;c.requested=e.basePath+c.path;""!=k&&(c.requested+="?"+k);return c},
e={enabled:!0};e.support=f.history&&f.history.pushState&&f.history.replaceState?!0:!1;e.basePath="";e.baseQuery={};var d={events:{}};d.events.change="hasher_change";d.history=e;d.setBasePath=function(a){e.basePath=a;l(!0)};var j,c,m;j=c=new q;var s=function(){l()},t=function(){l()},r=function(){h(f).trigger(d.events.change)},l=function(a){j=c;e.support&&e.enabled&&(m=location.href,c=n(m),a||(!j||j.path!=c.path||d.notifyIfNoChange)&&r());0<location.hash.length&&(m=location.hash,c=n(m),a||(!j||j.path!=
c.path||d.notifyIfNoChange)&&r())};d.getTitle=function(){return u.title};d.enable=function(a){h(f).bind("hashchange",s);h(f).bind("popstate",t);a||l(a)};d.disable=function(){h(f).unbind("hashchange",s);h(f).unbind("popstate",t)};d.check=l;d.change=function(a,d){if("undefined"!=typeof a){j=c;m=a;c=n(a,e.baseQuery);var b=h.hasher.getTitle(c);try{document.title=b}catch(l){}e.support&&e.enabled?f.history.pushState(null,b,c.requested):location.hash=c.path;j&&(j.path!=c.path&&!d)&&r()}};d.replace=function(a){if("undefined"!=
typeof a){m=a;c=n(a,e.baseQuery);a=h.hasher.getTitle(c);try{document.title=a}catch(d){}e.support&&e.enabled?f.history.replaceState(null,a,c.requested):location.hash=c.path}};d.notifyIfNoChange=!0;d.current=function(){return c};d.last=function(){return j};d.utils={};d.utils.urlQueryToObject=p;d.utils.parsePath=n;h.hasher=d;f.Hasher=d;null==e.basePath&&(e.basePath=location.pathname);null==e.baseQuery&&(e.baseQuery=p(location.search))})(jQuery,window,document);